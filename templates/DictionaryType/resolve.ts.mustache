export type {{{name}}} = undefined | {[key: string]: {{{type}}} };

export function {{{initializer}}}(validated: {{{internalPrefix}}}Validated.{{{name}}}): {{{name}}} {
    const value: {{{name}}} = {};
    for (const key in validated) {
        value[key] = {{{typeInitializer}}}(validated[key]);
    }
    return value;
}

export function {{{resolver}}}(dest: {{{name}}}, src: {{{internalPrefix}}}Validated.{{{name}}}, resolvedReferences: {{{internalPrefix}}}References.ResolvedReferences): {{{name}}} | {{{internalPrefix}}}Util.ResolutionError {
    {{{internalPrefix}}}assert.ok(typeof dest !== "undefined");
    for (const key in src) {
        const resolved = {{{typeResolver}}}(dest[key], src[key], resolvedReferences);
        if (resolved instanceof {{{internalPrefix}}}Util.ResolutionError) return new {{{internalPrefix}}}Util.ResolutionError(`Error encountered resolving key: [${key}]`, resolved);
        dest[key] = resolved;
    }
    return dest;
}
